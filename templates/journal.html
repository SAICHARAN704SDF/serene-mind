{% extends "base.html" %}

{% block title %}Journal & Mood - Serenemind{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto">
    <h1 class="text-4xl font-display font-bold text-white text-center mb-8 animate-fade-in">Your Wellness Journal</h1>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Mood Tracker -->
        <div class="glass-effect p-8 rounded-2xl">
            <h2 class="text-3xl font-bold text-white mb-6">How are you feeling?</h2>
            <form action="{{ url_for('add_mood') }}" method="post" class="mb-6">
                <div class="grid grid-cols-5 gap-4 mb-6">
                    <button name="mood" value="ecstatic" class="text-6xl transform transition-all duration-300 hover:scale-125 hover:rotate-12 focus:outline-none p-4 rounded-xl hover-glow">ğŸ˜ƒ</button>
                    <button name="mood" value="happy" class="text-6xl transform transition-all duration-300 hover:scale-125 hover:rotate-12 focus:outline-none p-4 rounded-xl hover-glow">ğŸ™‚</button>
                    <button name="mood" value="neutral" class="text-6xl transform transition-all duration-300 hover:scale-125 hover:rotate-12 focus:outline-none p-4 rounded-xl hover-glow">ğŸ˜</button>
                    <button name="mood" value="sad" class="text-6xl transform transition-all duration-300 hover:scale-125 hover:rotate-12 focus:outline-none p-4 rounded-xl hover-glow">ğŸ˜•</button>
                    <button name="mood" value="awful" class="text-6xl transform transition-all duration-300 hover:scale-125 hover:rotate-12 focus:outline-none p-4 rounded-xl hover-glow">ğŸ˜</button>
                </div>
            </form>
            <h3 class="text-2xl text-white mb-4">Recent Moods</h3>
            <div class="space-y-4">
                {% for mood in moods %}
                <div class="bg-white/10 p-4 rounded-xl hover-glow transition-all duration-300">
                    <div class="flex justify-between items-center">
                        <span class="text-4xl">
                            {% if mood.mood == 'ecstatic' %}ğŸ˜ƒ
                            {% elif mood.mood == 'happy' %}ğŸ™‚
                            {% elif mood.mood == 'neutral' %}ğŸ˜
                            {% elif mood.mood == 'sad' %}ğŸ˜•
                            {% else %}ğŸ˜{% endif %}
                        </span>
                        <div class="flex flex-col items-end gap-2">
                            <span class="text-sm text-gray-300">{{ mood.timestamp.strftime('%H:%M %d/%m/%Y') }}</span>
                            <div class="flex gap-1">
                                <a href="{{ url_for('edit_mood', id=mood.id) }}" class="px-2 py-1 bg-yellow-500 text-white rounded text-xs hover:bg-yellow-400 transition-colors">Edit</a>
                                <form action="{{ url_for('delete_mood', id=mood.id) }}" method="post" class="inline" onsubmit="return confirm('Are you sure you want to delete this mood log?')">
                                    <button type="submit" class="px-2 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-400 transition-colors">Delete</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- Journal -->
        <div class="glass-effect p-8 rounded-2xl">
            <h2 class="text-3xl font-bold text-white mb-6">Private Journal</h2>
            <form action="{{ url_for('add_entry') }}" method="post" class="mb-6">
                <textarea name="text" rows="6" placeholder="What's on your mind today? Share your thoughts, feelings, or experiences..." class="w-full p-4 rounded-xl border-2 border-cyan-300 bg-white/90 text-gray-800 focus:outline-none focus:ring-4 focus:ring-cyan-300 transition-all duration-300 text-lg resize-none" required></textarea>
                <button type="submit" class="w-full py-4 bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-bold rounded-xl hover:from-cyan-400 hover:to-blue-400 transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-cyan-300 text-lg shadow-lg">
                    Save Entry âœ¨
                </button>
            </form>
            <h3 class="text-2xl text-white mb-4">Recent Entries</h3>
            <div class="space-y-4 max-h-96 overflow-y-auto">
                {% for entry in entries %}
                <div class="bg-white/10 p-4 rounded-xl hover-glow transition-all duration-300">
                    <p class="text-gray-200 text-base whitespace-pre-wrap leading-relaxed">{{ entry.text }}</p>
                    <div class="flex justify-between items-center mt-3">
                        <div class="flex gap-2">
                            <a href="{{ url_for('edit_entry', id=entry.id) }}" class="px-3 py-1 bg-yellow-500 text-white rounded text-sm hover:bg-yellow-400 transition-colors">Edit</a>
                            <form action="{{ url_for('delete_entry', id=entry.id) }}" method="post" class="inline" onsubmit="return confirm('Are you sure you want to delete this entry?')">
                                <button type="submit" class="px-3 py-1 bg-red-500 text-white rounded text-sm hover:bg-red-400 transition-colors">Delete</button>
                            </form>
                        </div>
                        <p class="text-xs text-gray-400">{{ entry.timestamp.strftime('%H:%M %d/%m/%Y') }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}